# Инструкция по проектированию (Process)

Документ описывает последовательность этапов проектирования продукта и подготовки к реализации автономными агентами.

---

## Этап 0. Цели и метрики успеха
**Цель:** определить, что считается успехом MVP.
- Цели продукта (user value).
- Метрики (конверсия, time‑to‑report, retention, CAC).

**Выход:**
- Зафиксированные критерии успеха в `docs/tech-spec-ru.md`.

---

## Этап 1. Первичное описание идеи (Free‑form Brief)
**Цель:** собрать общее описание продукта в свободной форме.
- Пользователь описывает идею своими словами.
- Агент не уточняет детали, только фиксирует намерение.

**Выход:**
- Сохранение в `docs/qa-ru.md` (как часть лога).

---

## Этап 2. Уточняющие вопросы (Deep Discovery)
**Цель:** задать 100–200 уточняющих вопросов (по одному), чтобы закрыть все пробелы.
- Вопросы охватывают: бизнес‑логику, UX, данные, интеграции, комплаенс, тесты.
- Ответы фиксируются без интерпретаций.

**Выход:**
- Лог Q/A в `docs/qa-ru.md`.

---

## Этап 3. Формирование ТЗ и спецификаций
**Цель:** конвертировать ответы в структурированное ТЗ.
- Создаются: `docs/tech-spec-ru.md`, `docs/tech-addendum-1-ru.md`.
- Формируется список входных данных/кредов (`docs/inputs-required-ru.md`).

**Выход:**
- Полный комплект ТЗ и требований.

---

## Этап 4. Risk / Feasibility Review
**Цель:** оценить риски и наличие данных/зависимостей.
- Доступность данных (FPL/SLCSP/ZIP).
- Комплаенс‑риски, LLM‑стоимость, легальные риски.
- План B (синтетика, заглушки).

**Выход:**
- Краткий список рисков и планов обхода.

---

## Этап 5. Архитектурные решения (ADR)
**Цель:** зафиксировать ключевые архитектурные решения.
- Стек, хранение, multi‑tenant, модель шифрования.

**Выход:**
- Список ADR или раздел в `docs/tech-spec-ru.md`.

---

## Этап 6. Контракты и эталонные данные
**Цель:** стабилизировать форматы и проверочные наборы.
- Контракты данных/API.
- Golden datasets для тестов.

**Выход:**
- `docs/data-templates-ru.md` + фикстуры.

---

## Этап 7. Определение задач, возможных без кредов
**Цель:** выделить задачи, которые можно реализовать на заглушках.
- UI/UX, бизнес‑логика, PDF, тесты, мок‑данные, миграции.

**Выход:**
- Список задач, которые стартуют без внешних ключей.

---

## Этап 8. Анализ параллельности
**Цель:** разделить задачи на независимые потоки.
- Определить зависимости и что можно запускать параллельно.

**Выход:**
- Карта параллельных задач и зависимостей.

---

## Этап 9. Оркестрация и агенты
**Цель:** подготовить документацию для параллельной работы агентов.
- Создать **оркестратор**: `framework/docs/orchestrator-plan-ru.md`.
- Создать отдельные файлы‑задачи для каждого агента (mini‑ТЗ + данные + промпт).

**Выход:**
- Набор файлов для автономной работы агентов.

---

## Этап 10. План тестирования и приемки
**Цель:** формализовать критерии готовности.
- Definition of Done для фич и релиза.
- План тестов (unit/integration/e2e).
- План тестирования можно готовить параллельно разработке.

**Выход:**
- Чек‑лист приемки.

---

## Этап 11. Security/Privacy Review
**Цель:** проверить безопасность и приватность.
- Ретеншн, экспорт/удаление, шифрование, дисклеймеры.

**Выход:**
- Обновления в ТЗ/политиках.

---

## Этап 12. Observability & Telemetry
**Цель:** мониторинг качества и ошибок.
- Логи, метрики, алерты.

**Выход:**
- План мониторинга.

---

## Этап 13. Release & Rollback
**Цель:** безопасный выпуск.
- Процесс релиза и отката.

**Выход:**
- Release‑инструкция.

---

## Этап 14. Post‑Launch цикл
**Цель:** улучшения после запуска.
- Сбор фидбэка, A/B тесты, улучшения.

**Выход:**
- План итераций.

---

## Логирование
- Все этапы фиксируются в `docs/qa-ru.md`.
- Сессии логируются в `docs/chat-log-ru.md` + краткое резюме в `docs/chat-summary-ru.md`.
